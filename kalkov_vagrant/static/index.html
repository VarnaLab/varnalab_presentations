<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>Presentation</title>

  <meta name="viewport" content="width=device-width"/>

  <link rel="stylesheet" href="./css/reset.css" type="text/css"/>
  <link rel="stylesheet" href="./css/showoff.css" type="text/css"/>

  <script type="text/javascript" src="./js/jquery-1.4.2.min.js"></script>
  <script type="text/javascript" src="./js/jquery.cycle.all.js"></script>
	<script type="text/javascript" src="./js/jquery-print.js"></script>
  <script type="text/javascript" src="./js/jquery.batchImageLoad.js"></script>

  <script type="text/javascript" src="./js/jquery.doubletap-0.1.js"></script>

  <script type="text/javascript" src="./js/fg.menu.js"></script>
  <script type="text/javascript" src="./js/showoff.js"></script>
  <script type="text/javascript" src="./js/jTypeWriter.js"> </script>
  <script type="text/javascript" src="./js/sh_main.min.js"></script>
  <script type="text/javascript" src="./js/core.js"></script>
  <script type="text/javascript" src="./js/showoffcore.js"></script>
  <script type="text/javascript" src="./js/coffee-script.js"></script>

  <link type="text/css" href="./css/fg.menu.css" media="screen" rel="stylesheet" />
  <link type="text/css" href="./css/theme/ui.all.css" media="screen" rel="stylesheet" />
  <link type="text/css" href="./css/sh_style.css" rel="stylesheet" >

  
    <link rel="stylesheet" href="file/showoff.css" type="text/css"/>
  

  

  <script type="text/javascript">
  $(function(){
      setupPreso(false, './');
  });
  </script>

</head>

<body>

<a tabindex="0" href="#search-engines" class="fg-button fg-button-icon-right ui-widget ui-state-default ui-corner-all" id="navmenu"><span class="ui-icon ui-icon-triangle-1-s"></span>slides</a>
<div id="navigation" class="hidden"></div>

<div id="help">
  <table>
    <tr><td class="key">z, ?</td><td>toggle help (this)</td></tr>
    <tr><td class="key">space, &rarr;</td><td>next slide</td></tr>
    <tr><td class="key">shift-space, &larr;</td><td>previous slide</td></tr>
    <tr><td class="key">d</td><td>toggle debug mode</td></tr>
    <tr><td class="key">## &lt;ret&gt;</td><td>go to slide #</td></tr>
    <tr><td class="key">c, t</td><td>table of contents (vi)</td></tr>
    <tr><td class="key">f</td><td>toggle footer</td></tr>
    <tr><td class="key">r</td><td>reload slides</td></tr>
    <tr><td class="key">n</td><td>toggle notes</td></tr>
    <tr><td class="key">p</td><td>run preshow</td></tr>
  </table>
</div>

<div class="buttonNav">
  <input type="submit" onClick="prevStep();" value="prev"/>
  <input type="submit" onClick="nextStep();" value="next"/>
</div>

<div id="preso">loading presentation...</div>
<div id="footer">
  <span id="slideInfo"></span>
  <span id="debugInfo"></span>
  <span id="notesInfo"></span>
</div>

<div id="slides" class="offscreen" style="display:none;">
<div class="slide" data-transition="turnDown"><div class="content" ref="intro/intro/1">
<h1>Automate your development environment using Vagrant</h1></div>
</div><div class="slide" data-transition="turnDown"><div class="content center" ref="intro/intro/2">
<h1>Who am I ?</h1>

<ul>
<li>Vassil Kalkov</li>
<li>doing : web development and other stuff</li>
<li>github : http://github.com/kalkov</li>
<li>twitter : versicolor</li>
</ul>
</div>
</div><div class="slide" data-transition="turnDown"><div class="content bullets incremental" ref="intro/intro/3">
<h1>What I like ?</h1>

<ul>
<li><img src="./file/intro/linux.png" alt="linux"/></li>
<li><img src="./file/intro/ruby.png" alt="ruby"/> <img src="./file/intro/rails.png" alt="rails"/></li>
<li><img src="./file/intro/node.png" alt="node"/></li>
<li><img src="./file/intro/github.svg" alt="github"/></li>
</ul>
</div>
</div><div class="slide" data-transition="turnDown"><div class="content bullets incremental" ref="intro/intro/4">
<h1>What I don't like ?</h1>

<ul>
<li>Too dangerous to tell you !</li>
<li><img src="./file/intro/too_dangerous.jpg" alt="too_dangerous"/></li>
</ul>
</div>
</div><div class="slide" data-transition="turnDown"><div class="content bullets incremental" ref="intro/intro/5">
<h1>What I need ?</h1>

<ul>
<li>linux , git</li>
<li>ruby , node.js</li>
<li>nginx + passenger</li>
<li>SQL : SQLite/MySQL/Postgres</li>
<li>NoSQL : Redis/CouchDB/MongoDB</li>
<li>...</li>
</ul>
</div>
</div><div class="slide" data-transition="turnDown"><div class="content bullets incremental" ref="intro/intro/6">
<h1>Why NOT use apt-get ?</h1>

<ul>
<li><p>It only installs !</p></li>
<li><p>Who configures ?</p></li>
<li><p>YOU :(</p></li>
</ul>
</div>
</div><div class="slide" data-transition="turnDown"><div class="content center" ref="intro/intro/7">
<h1>But I'm not a powerful sysadmin!</h1>

<p><img src="./file/intro/sysadmin.jpg" alt="sysadmin"/></p></div>
</div><div class="slide" data-transition="turnDown"><div class="content bullets incremental" ref="intro/intro/8">
<h1>&#xA1;The PROBLEM!</h1>

<ul>
<li>Not all developers want to be sysadmins</li>
<li>Not all sysadmins can setup rails environment</li>
<li>New team members setup time</li>
<li>I need my production environment locally</li>
</ul>
</div>
</div><div class="slide" data-transition="turnDown"><div class="content bullets incremental" ref="intro/intro/9">
<h1>Solution ?</h1>

<ul>
<li>Virtualization</li>
<li>But is it easy ?</li>
<li>YES !</li>
</ul>
</div>
</div><div class="slide" data-transition="turnDown"><div class="content bullets incremental" ref="intro/intro/10">
<h1>What I use ?</h1>

<ul>
<li>Vagrant</li>
<li>Chef</li>
<li>Librarian</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="vagrant/vagrant/1">
<h1>What is a vagrant ?</h1>

<ul>
<li>Something ...</li>
<li>moving from one place to another .</li>
<li>In human world it is called :</li>
<li>'Gentleman of the road'</li>
</ul>
</div>
</div><div class="slide" data-transition="turnDown"><div class="content bullets incremental smbullets" ref="vagrant/vagrant/2">
<h1>What is vagrant in computers ?</h1>

<ul>
<li>Some project coming with it's whole environment , which can easily settle down , configure itself and run .</li>
<li>This process must be fully automated .</li>
<li>Must be started with one simple command.</li>
</ul>
</div>
</div><div class="slide" data-transition="turnDown"><div class="content bullets incremental smbullets" ref="vagrant/vagrant/3">
<h1>What you take ?</h1>

<ul>
<li>Automatic VM creation on top of Oracle's VirtualBox</li>
<li>Automated provisioning of VM using Chef/Puppet</li>
<li>Full SSH</li>
<li>Static IP</li>
<li>Forward ports</li>
<li>Shared folders</li>
<li>Easy packaging of VM</li>
<li>Turn off when you are done</li>
<li>Rebuild VM with one command</li>
</ul>
</div>
</div><div class="slide" data-transition="turnDown"><div class="content bullets incremental smbullets" ref="vagrant/vagrant/4">
<h1>gem Vagrant</h1>

<ul>
<li>Vagrant uses the ruby programming language .</li>
<li>A library is called gem in ruby world .</li>
<li><a href="https://github.com/mitchellh/vagrant">https://github.com/mitchellh/vagrant</a></li>
</ul>
</div>
</div><div class="slide" data-transition="turnDown"><div class="content commandline incremental" ref="vagrant/vagrant/5">
<h1>Install Vagrant</h1>

<pre><code><code class="command">$ gem install vagrant  #installs</code>
<code class="command">$ vagrant box add lucid32 http://... #downloads box</code>
<code class="command">$ vagrant init #makes Vagrantfile ...</code>
<code class="command">$ vagrant up #builds</code>
</code></pre></div>
</div><div class="slide" data-transition="turnDown"><div class="content commandline incremental" ref="vagrant/vagrant/6">
<h1>Configure Vagrant</h1>

<pre><code><code class="command">$ nano Vagrantfile</code>
</code></pre></div>
</div><div class="slide" data-transition="turnDown"><div class="content smaller" ref="vagrant/vagrant/7">
<h1>Vagrantfile</h1>

<pre class="sh_ruby"><code>        Vagrant::Config.run do |config|

          config.vm.box = "lucid32"

          config.vm.network "33.33.33.10"

          # Forward a port from the guest to the host, which allows for outside
          # computers to access the VM
          config.vm.forward_port("80", 80, 8080)
          config.vm.forward_port("3010", 3010, 3030,:auto =&gt; true)

          # Share an additional folder to the guest VM. The first argument is
          # an identifier, the second is the path on the guest to mount the
          # folder, and the third is the path on the host to the actual folder.
          config.vm.share_folder("v-root", "/vagrant", ".", :nfs =&gt; true)
          config.vm.share_folder("v-srv", "/srv", "/srv", :nfs =&gt; true)
        end</code></pre></div>
</div><div class="slide" data-transition="turnDown"><div class="content smaller commandline incremental" ref="vagrant/vagrant/8">
<h1>Vagrant commands</h1>

<pre><code><code class="command">$ vagrant --help</code>
<code class="result">
      vagrant box                        # Commands to manage system boxes
      vagrant destroy                    # Destroy the environment, deleting the created virtual machines
      vagrant halt                       # Halt the running VMs in the environment
      vagrant help [TASK]                # Describe available tasks or one specific task
      vagrant init [box_name] [box_url]  # Initializes the current folder for Vagrant usage
      vagrant package                    # Package a Vagrant environment for distribution
      vagrant provision                  # Rerun the provisioning scripts on a running VM
      vagrant reload                     # Reload the environment, halting it then restarting it.
      vagrant resume                     # Resume a suspended Vagrant environment.
      vagrant ssh                        # SSH into the currently running Vagrant environment.
      vagrant ssh_config                 # outputs .ssh/config valid syntax for connecting to this environment via ssh
      vagrant status                     # Shows the status of the current Vagrant environment.
      vagrant suspend                    # Suspend a running Vagrant environment.
      vagrant up                         # Creates the Vagrant environment
      vagrant version                    # Prints the Vagrant version information
</code></code></pre></div>
</div><div class="slide" data-transition="turnDown"><div class="content smaller commandline incremental" ref="vagrant/vagrant/9">
<h1>Start vagrant</h1>

<pre><code><code class="command">$ vagrant up</code>
<code class="command">$ vagrant ssh</code>
</code></pre></div>
</div><div class="slide" data-transition="turnDown"><div class="content smaller incremental" ref="vagrant/vagrant/10">
<h1>Install software on VM</h1>

<pre class="sh_ruby"><code>    Vagrant::Config.run do |config|
      config.vm.provision :chef_solo do |chef|
        chef.log_level = :debug # config.log_level
        chef.cookbooks_path = "cookbooks"
        chef.add_recipe 'build-essential'
        chef.add_recipe "apt"
        chef.add_recipe "couchdb"
        chef.add_recipe "git"
        chef.add_recipe "nodejs"
        chef.add_recipe "redis"
        chef.add_recipe "sqlite"
        chef.add_recipe "nginx::source"
        chef.add_recipe 'rvm_passenger'
        chef.add_recipe 'rvm_passenger::nginx'
        chef.add_recipe 'rvm'
        chef.add_recipe 'rvm::user'
        chef.add_recipe 'rvm::vagrant'
      end
    end</code></pre></div>
</div><div class="slide" data-transition="turnDown"><div class="content incremental" ref="chef/chef/1">
<h1>gem chef</h1>

<p>Reality-Based automation for the Cloud.
Chef is an open-source systems integration framework built specifically for automating the cloud. No matter how complex the realities of your business, Chef makes it easy to deploy servers and scale applications throughout your entire infrastructure. Because it combines the fundamental elements of configuration management and service oriented architectures with the full power of Ruby, Chef makes it easy to create an elegant, fully automated infrastructure.</p></div>
</div><div class="slide" data-transition="turnDown"><div class="content bullets incremental" ref="chef/chef/2">
<h1>In simple words :</h1>

<ul>
<li>A tool that can install and configure software packages from recipes you write in plain ruby language.</li>
<li><p><a href="https://github.com/opscode/chef">https://github.com/opscode/chef</a></p></li>
<li><p><a href="http://opscode.com">http://opscode.com</a></p></li>
</ul>
</div>
</div><div class="slide" data-transition="turnDown"><div class="content smaller incremental" ref="chef/chef/3">
<h1>chef recipes</h1>

<pre class="sh_ruby"><code>    require "tmpdir"

    user "redis" do
      system true

      action :create
    end


    %w(/var/lib/redis, /var/log/redis).each do |dir|
      directory(dir) do
        owner "redis"
        group "redis"

        action :create
      end
    end

    tmp = Dir.tmpdir
    case node[:platform]
    when "debian", "ubuntu"
      # this assumes 32-bit base Vagrant box.
      # built via brew2deb, http://bit.ly/brew2deb. MK.
      %w(redis2-server_2.2.12+github1_i386.deb).each do |deb|
        path = File.join(tmp, deb)

        cookbook_file(path) do
          owner "vagrant"
          group "vagrant"
        end

        package(deb) do
          action   :install
          source   path
          provider Chef::Provider::Package::Dpkg
        end
      end # each

      bash "update rc.d" do
        code &lt;&lt;-CODE
        sudo update-rc.d redis-server defaults
        sudo service redis-server start
        CODE
        user "root"

        subscribes :run, resources(:package =&gt; "redis2-server_2.2.12+github1_i386.deb"), :immediately
      end

      service "redis-server" do
        supports :restart =&gt; true, :status =&gt; true, :reload =&gt; true
        action [:enable, :start]
      end
    end # case</code></pre></div>
</div><div class="slide" data-transition="turnDown"><div class="content bullets small" ref="chef/chef/4">
<h1>Cookbook sources</h1>

<ul>
<li>https://github.com/opscode/cookbooks</li>
<li>https://github.com/travis-ci/travis-cookbooks</li>
<li>https://github.com/cookbooks</li>
<li>https://github.com/kalkov</li>
</ul>
</div>
</div><div class="slide" data-transition="turnDown"><div class="content bullets small" ref="chef/chef/5">
<h1>chef-server</h1>

<ul>
<li>Chef can be run not only on your pc but as a server</li>
<li>We can make another presentation for chef-server</li>
</ul>
</div>
</div><div class="slide" data-transition="turnDown"><div class="content incremental" ref="librarian/librarian/1">
<h1>gem librarian</h1>

<p>A tool like bundler for chef cookbooks
<a href="https://github.com/applicationsonline/librarian">https://github.com/applicationsonline/librarian</a></p></div>
</div><div class="slide" data-transition="turnDown"><div class="content commandline incremental" ref="librarian/librarian/2">
<h1>Install &amp; setup librarian</h1>

<pre><code><code class="command">$ gem install librarian #installs</code>
<code class="command">$ librarian-chef init #makes Cheffile</code>
<code class="command">$ nano Cheffile</code>
</code></pre></div>
</div><div class="slide" data-transition="turnDown"><div class="content smaller incremental" ref="librarian/librarian/3">
<h1>Cheffile</h1>

<pre class="sh_ruby"><code>    site 'http://community.opscode.com/api/v1'
    cookbook 'build-essential'
    cookbook "apt"
    cookbook "couchdb"
    cookbook "git"
    cookbook "nodejs"
    cookbook "sqlite"

    cookbook 'redis',
          :git =&gt; 'git@github.com:kalkov/kalkov_redis_cookbook.git'

    cookbook 'rvm',
          :git =&gt; 'git@github.com:kalkov/kalkov_rvm_cookbook.git'

    cookbook 'rvm_passenger',
          :git =&gt; 'git@github.com:kalkov/kalkov_rvm_passenger_cookbook.git'

    cookbook 'nginx',
       :git =&gt; 'git@github.com:kalkov/kalkov_nginx_cookbook.git'</code></pre></div>
</div><div class="slide" data-transition="turnDown"><div class="content commandline incremental" ref="librarian/librarian/4">
<h1>Don't forget</h1>

<pre><code><code class="command">$ git rm -r cookbooks #if the directory is present</code>
<code class="command">$ echo cookbooks &gt;&gt; .gitignore</code>
<code class="command">$ mkdir cookbooks #librarian doesn't auto mkdir yet</code>
</code></pre></div>
</div><div class="slide" data-transition="turnDown"><div class="content commandline incremental" ref="librarian/librarian/5">
<h1>Install cookbooks into ./cookbooks</h1>

<pre><code><code class="command">$ librarian-chef install --clean --verbose</code>
</code></pre></div>
</div><div class="slide" data-transition="turnDown"><div class="content bullets incremental" ref="fin/fin/1">
<h1>The presentation</h1>

<ul>
<li>This presentation is built using showoff</li>
<li>A ruby gem using the sinatra web framework
<a href="https://github.com/schacon/showoff">https://github.com/schacon/showoff</a></li>
</ul>
</div>
</div><div class="slide" data-transition="turnDown"><div class="content bullets incremental" ref="fin/fin/2">
<h1>Let the party begin</h1>

<ul>
<li><img src="./file/fin/party.jpg" alt="party"/></li>
</ul>
</div>
</div></div>

</body>
</html>
